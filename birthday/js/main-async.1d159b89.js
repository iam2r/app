(window.webpackJsonp=window.webpackJsonp||[]).push([["main-async"],{"14ec":function(t,e,s){},1537:function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("ddb0");var i=s("1da1"),a=s("2b0e"),n=(s("26e9"),s("9ab4")),r=s("60a3"),o=s("48d3"),l=s("cffa"),c=s("a5cf"),h=s("ade3"),d=s("7212");s("1dec");function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(Object(s),!0).forEach((function(e){Object(h.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var m=class extends o.Component{get swiperInstance(){return this.mySwiper.$swiper}mounted(){setTimeout(()=>{this.updateScroll()})}onSetTranslate(t){return this.swiperInstance}updateScroll(){this.options.loop&&(this.swiperInstance.loopDestroy(),this.swiperInstance.loopCreate()),this.swiperInstance.updateSlides(),this.swiperInstance.update()}render(){var t=arguments[0];return t(d.Swiper,{ref:"mySwiper",on:{setTranslate:()=>{this.onSetTranslate(this.swiperInstance.translate)}},attrs:{options:u({},this.options)}},[Array.from({length:this.length}).map((e,s)=>t(d.SwiperSlide,[this.$scopedSlots.default(s)]))])}};Object(n.a)([Object(r.c)({default:()=>({autoplay:{delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!1},loop:!0,pagination:{el:".swiper-pagination",clickable:!0}})})],m.prototype,"options",void 0),Object(n.a)([Object(r.c)({default:0})],m.prototype,"length",void 0),Object(n.a)([Object(r.d)()],m.prototype,"mySwiper",void 0),Object(n.a)([Object(r.b)("setTranslate")],m.prototype,"onSetTranslate",null);var v=m=Object(n.a)([r.a],m);s("1276"),s("498a");class b{constructor(t,e){this.splitSymbol="<br>",this.items=[],this.$el="string"==typeof t?document.querySelector(t):t,e.splitSymbol&&(this.splitSymbol=e.splitSymbol),this.text=e.content,this.init()}init(){var t=0;this.text.trim().split(this.splitSymbol).forEach(e=>{e.split("").forEach(e=>{var s=document.createElement("span");s.textContent=e,s.classList.add("land-in-animation"),s.style.animationDelay="".concat(.05*t,"s"),this.items.push(s),t++}),this.items.push(document.createElement("br"))})}start(){this.hide(),this.items.forEach(t=>{"BR"!=t.nodeName&&t.classList.add("land-in-animation"),this.$el.appendChild(t)})}hide(){this.$el.innerHTML=""}skip(){this.items.forEach(t=>{t.classList.remove("land-in-animation")})}destory(){this.$el=null,this.items=[]}}s("14ec");l.a.ticker.lagSmoothing(0,null);var w=class extends o.Component{constructor(){super(...arguments),this.birthDate=+new Date("2020/9/19"),this.revolution=864e5,this.active=!1,this.sceneRotate=0,this.sceneScale=1,this.sceneTranslateY=7,this.isSceneAnimating=!1,this.countDown=0,this.test=!1,this.slideIndex=-1,this.showTips=!1,this.swiperOptions={direction:"vertical",on:{slideChangeTransitionEnd:this.onSlideChangeTransitionEnd}}}get sceneStyle(){return{transform:"translate3d(-50%, ".concat(this.sceneTranslateY,"rem,0) rotateZ(").concat(this.sceneRotate,"deg) scale3d(").concat(this.sceneScale,",").concat(this.sceneScale,",1)")}}get isBirthDay(){return this.test}get formateMilliSecond(){var t=this.countDown,e=6e4,s=60*e,i=24*s,a=Math.floor(t/i),n=Math.floor((t-a*i)/s),r=Math.floor((t-a*i-n*s)/e),o=Math.floor((t-a*i-n*s-r*e)/1e3),l=t-a*i-n*s-r*e-1e3*o,c=l<10?"0"+l:""+l;return{day:a<10?"0"+a:""+a,hour:n<10?"0"+n:""+n,minute:r<10?"0"+r:""+r,second:o<10?"0"+o:""+o,milliSecond:c=l<100?"0"+c:""+c}}onSlideIndexChange(t){1==t?(this.lanInItem=this.initLanInItem(),this.lanInItem.start()):this.lanInItem&&this.lanInItem.hide()}onArrowTipsStatusChange(){this.$nextTick(()=>{this.showTips=!this.mySwiper.swiperInstance.isEnd})}mounted(){this.slideIndex=0,this.initCountDown(),setTimeout(()=>{this.active||this.doActive()},2e3)}initLanInItem(){return this.lanInItem&&this.lanInItem.destory(),new b(this.$el.querySelector(".land-in-p"),{content:"Hi,XXX。<br>寒窗苦参凡尘坎坷，<br>春秋却忘夏衾冬葛。<br>世间冷暖与思念如何物？<br>与你我如何物？<br>盼泪眼望穿天地，<br>求知己如若斯人。<br>长途漫漫，<br>乞相伴而行。<br>诞辰快乐。"})}onSlideChangeTransitionEnd(){this.slideIndex=this.mySwiper.swiperInstance.activeIndex}initCountDown(){this.countDown=this.birthDate-+new Date,clearInterval(this.countDownTimer),this.countDownTimer=setInterval(()=>{this.countDown=this.birthDate-+new Date,this.countDown<=0&&clearInterval(this.countDownTimer)},1e3)}doActive(){if(!this.isSceneAnimating){this.isSceneAnimating=!0,setTimeout(()=>{this.isSceneAnimating=!1},2e3);var t=new Date,e=+t-+new Date("".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate()));if(this.active=!this.active,this.sceneRotate=this.active?e%this.revolution/this.revolution*-360:0,this.sceneScale=this.active?.09:1,this.sceneTranslateY=this.active?-30.2:7,this.active){if(this.snailRotateTween)return this.snailRotateTween.time(this.revolution/1e3).repeat(-1).restart();this.snailRotateTween=c.d.fromTo(".snail-box",this.revolution/1e3,{rotate:0},{ease:c.b.easeNone,rotate:-360,repeat:-1})}else this.snailRotateTween&&this.snailRotateTween.time(2).reverse()}}startsDom(){var t=this.$createElement;return t("div",{class:"stars"},[t("div",{class:"star"}),t("div",{class:"star pink"}),t("div",{class:"star blue"}),t("div",{class:"star yellow"})])}countdownDom(){var t=this.$createElement;return t("transition",{attrs:{"enter-active-class":"animated jello","leave-active-class":"animated fast bounceOut"}},[0!=this.slideIndex||this.isBirthDay?null:t("div",{class:"clock clock-countdown"},[t("div",{class:"elem-center"},[t("div",{class:"digit"},[t("span",{class:"days"},[this.formateMilliSecond.day]),t("span",{class:"txt"},["天"])])]),t("div",{class:"elem-bottom"},[t("div",{class:"deco"}),t("span",{class:"hours"},[this.formateMilliSecond.hour]),t("span",{class:"thin"},[" 小时"]),t("span",{class:"minutes"},[this.formateMilliSecond.minute]),t("span",{class:"thin"},[" 分钟"]),t("span",{class:"seconds"},[this.formateMilliSecond.second]),t("span",{class:"thin"},[" 秒"])])])])}startTextDom(){var t=this.$createElement;return t("transition",{attrs:{"enter-active-class":"animated jello","leave-active-class":"animated fast bounceOut"}},[0==this.slideIndex&&this.isBirthDay?t("div",{class:"start-text"},[t("h1",{class:"title slide-bar"},["愿你贪吃不胖，愿你傻人傻福。"]),t("p",{class:"subtitle slide-bar"},["生日快乐！"])]):null])}snailDom(){var t=this.$createElement;return t("div",{class:"snail-box"},[t("div",{class:"snail-wrapper"},[t("div",{class:"snail"},[t("div",{class:"face"}),t("div",{class:"eyes left"}),t("div",{class:"eyes right"}),t("div",{class:"shell front"},[t("div",{class:"innershell"})]),t("div",{class:"shell behind"}),t("div",{class:"bottomchest"})])]),t("div",{class:"speed"},[t("span"),t("span"),t("span"),t("span")]),t("span"),t("span"),t("span"),t("span"),t("span"),t("span")])}page1Dom(){var t=this.$createElement;return t("div",{class:"page-one"},[t("v-touch",{on:{tap:()=>{this.test=!this.test}},class:"test-box"},["Click To Test"]),this.startsDom(),this.countdownDom(),this.startTextDom(),t("v-touch",{class:["scene",this.active?"active":""],style:this.sceneStyle,on:{tap:()=>{this.doActive()}}},[this.snailDom(),t("div",{class:"ground"},[t("div",{class:"earth"},[t("div",{class:"map-wrapper"}),t("div",{class:"earth-shadow"})])])])])}page2Dom(){var t=this.$createElement;return t("div",{class:"page-two"},[t("p",{class:"land-in-p",on:{click:()=>{this.lanInItem&&this.lanInItem.skip()}}})])}page3Dom(){return(0,this.$createElement)("div",{class:"page-three"},["page3"])}render(){var t=arguments[0];return t("div",{attrs:{id:"app"}},[t(v,{ref:"mySwiper",attrs:{options:this.swiperOptions,length:this.isBirthDay?3:1},scopedSlots:{default:t=>[this.page1Dom(),this.page2Dom(),this.page3Dom()][t]}}),t("span",{directives:[{name:"show",value:this.showTips}],class:"swiper-tip"})])}};Object(n.a)([Object(r.d)()],w.prototype,"mySwiper",void 0),Object(n.a)([Object(r.e)("slideIndex")],w.prototype,"onSlideIndexChange",null),Object(n.a)([Object(r.e)("slideIndex"),Object(r.e)("isBirthDay")],w.prototype,"onArrowTipsStatusChange",null);var f=w=Object(n.a)([r.a],w),y=a.default.prototype.$state=a.default.observable({appList:[],resources:[]}),g=(s("fb6a"),s("25f0"),s("2532"),s("466d"),s("2b3d"),function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((s,i)=>{if(e){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onreadystatechange=()=>{4==a.readyState&&200==a.status&&s(URL.createObjectURL(a.response))},a.send()}else{var n=new Image;n.onload=()=>{s(n)},n.onerror=()=>{i("load error:"+t)},n.src=t}})}),S=s("8af0"),I=s("ca95");a.default.config.productionTip=!1,a.default.use(I,{name:"v-touch"});var D=function(){var t=Object(i.a)((function*(t){for(var e=0;e<t.length;e++){var s=t[e];s.blob=yield g(s.url,!0)}return t}));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(i.a)((function*(){var t,e,i,a,n=yield(t="../apps.json?"+ +new Date,new Promise((e,s)=>{var i=new XMLHttpRequest;i.open("GET",t),i.send(),i.onreadystatechange=()=>{4==i.readyState&&200==i.status&&e(JSON.parse(i.response))}})),[r]=yield Promise.all([D(n.resources.birthday.filter(t=>t.type="images")),(e=s("0342"),i=["Lato"],a=[],i.forEach(t=>{var s=t.split(":"),i=s[0];(s[1]?s[1].split(","):["n4"]).forEach(t=>{var s=t.match(/^([nio])([1-9])$/i);if(s){var n="n"==s[1]?"normal":"i"==s[1]?"italic":"oblique",r=parseInt(s[2],10)+"00";a.push(new e(i,{style:n,weight:r}).load())}})}),Promise.all(a))]);S.a.emit("loaded",r)}));return function(){return t.apply(this,arguments)}}();S.a.once("loaded",t=>{t.forEach(t=>{var{url:e,blob:s}=t;((t,e)=>{Array.from(document.styleSheets).forEach(s=>{Array.from(s.rules).filter(e=>e.cssText.includes(t)).forEach(t=>t.style.backgroundImage="url(".concat(e,")"))})})(e,s)}),y.app=new a.default({render:t=>t(f)}).$mount("#app")}),O()},"1dec":function(t,e,s){}}]);