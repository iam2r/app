(window.webpackJsonp=window.webpackJsonp||[]).push([["loader"],{"02a2":function(e,t,i){},1733:function(e,t,i){"use strict";i.d(t,"d",(function(){return h})),i.d(t,"c",(function(){return l})),i.d(t,"e",(function(){return f})),i.d(t,"a",(function(){return u}));var n=i("faa1"),o=(i("c975"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("1276"),i("d4ec")),r=i("bee2"),a=i("fd0b"),s=function(){function e(){Object(o.a)(this,e),this.phone={iphonex:!1,iphonexr:!1,iphonexsmax:!1},this.browser={chrome:!1,safari:!1,firefox:!1,ie:!1,edge:!1,opera:!1,qq:!1,360:!1},this.mobile={device:!1,ios:!1,andriod:!1,tablet:!1},this.mobile=this.initMobileData(),this.version=this.getVersion(),this.webkit=this.iosWKWebView(),this.notchScreen=this.isNotchScreen(),this.browser=this.initBrowserData()}return Object(r.a)(e,[{key:"initMobileData",value:function(){var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,i=!!/iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()),n=/(?:iPad|PlayBook)/.test(e)||t&&!/(?:Mobile)/.test(e)||/(?:Firefox)/.test(e)&&/(?:Tablet)/.test(e);return{ios:i,andriod:t,tablet:n,device:t||i||n}}},{key:"getVersion",value:function(){return(navigator.userAgent.toLocaleLowerCase().match(/os [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}},{key:"iosWKWebView",value:function(){return this.mobile.ios&&-1==navigator.userAgent.indexOf("Safari")}},{key:"isNotchScreen",value:function(){var e=this.mobile.ios,t=screen.width,i=screen.height;return this.phone.iphonex=e&&375==t&&812==i&&3==devicePixelRatio,this.phone.iphonexr=e&&414==t&&896==i&&2==devicePixelRatio,this.phone.iphonexsmax=e&&414==t&&896==i&&3==devicePixelRatio,this.phone.iphonex||this.phone.iphonexr||this.phone.iphonexsmax}},{key:"initBrowserData",value:function(){var e=navigator.userAgent;return{chrome:e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1,safari:e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome")&&void 0===window.external,firefox:e.indexOf("Firefox")>-1,ie:!!window.ActiveXObject||"ActiveXObject"in window,edge:e.indexOf("Edge")>-1,opera:e.indexOf("Opera")>-1,qq:e.indexOf("qqbrowse")>-1,360:function(e,t){var i=navigator.mimeTypes;for(var n in i)if("application/vnd.chromium.remoting-viewer"==i[n].type)return!0;return!1}()}}},{key:"getWinOSName",value:function(){if(-1!=navigator.appVersion.indexOf("Win")&&/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(navigator.userAgent)&&"NT"==RegExp.$1)switch(RegExp.$2){case"5.1":return"WindowsXP";case"6.0":return"WindowsVista";case"6.1":return"Windows7";case"6.2":return"Windows8";case"10.0":return"Windows10";default:return"NT"}return""}},{key:"osName",get:function(){var e="Unknow",t="",i=[],n=navigator.userAgent,o=navigator.appVersion,r=navigator.platform;return this.mobile.andriod&&(t=(i=/android (\d+(?:\.\d+)+)/i.exec(n)||/android (\d+(?:\.\d+)+)/i.exec(r))?i[1]:""),this.mobile.ios&&(t=(i=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(n))?i[2]:""),this.getWinOSName()?e=this.getWinOSName():this.mobile.ios?e="iOS_"+t:-1!==o.indexOf("Mac")?e="OS X_":-1!==o.indexOf("X11")&&-1===o.indexOf("Linux")?e="OS X":this.mobile.andriod?e="Android_"+t:-1!==o.indexOf("Linux")&&(e="Linux"),e}},{key:"screenState",get:function(){var e=a.b.WEB;(e=this.mobile.device?90==window.orientation||-90==window.orientation?a.b.LANDSCAPE:a.b.PORTRAIT:window.innerWidth>1100?a.b.WEB:window.innerWidth/window.innerHeight<.73?a.b.PORTRAIT:a.b.LANDSCAPE,this.mobile.ios&&parseInt(this.version.split(".")[0])<9)&&(e=document.documentElement.clientWidth>document.documentElement.clientHeight?a.b.LANDSCAPE:a.b.PORTRAIT);return this.mobile.tablet&&(e=a.b.LANDSCAPE),e}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.a)(this,e),this.width=t,this.height=i}return Object(r.a)(e,[{key:"center",get:function(){return{x:this.width/2,y:this.height/2}}},{key:"ratio",get:function(){return this.width/this.height}}]),e}(),u={size:{width:800,height:600}},d=function(){function e(){var t=this;Object(o.a)(this,e),this.scale=1;var i=u.size;this.size=new c(i.width,i.height),window.addEventListener("resize",(function(){return t.onResize()})),window.addEventListener("orientationchange",(function(){return t.onResize()})),h.once(a.a.GAME_ENTER,(function(){t.onResize(),h.emit(a.a.STATE_CHANGE,t.state)})),this.onResize()}return Object(r.a)(e,[{key:"onResize",value:function(){this.doState(),this.doResize()}},{key:"doState",value:function(){var e=l.screenState;if(e!==this.state){var t=this.state;this.state=e,this.size=this.isPortrait?new c(u.size.height,u.size.width):new c(u.size.width,u.size.height),document.querySelector("body").setAttribute("data-screen",this.state),h.emit(a.a.STATE_CHANGE,this.state,t)}}},{key:"doResize",value:function(){var e=new c(innerWidth,innerHeight),t=this.size,i=e.ratio>t.ratio?e.height/t.height:e.width/t.width,n=new c(t.width*i,t.height*i);this.scale=i,this.renderSize=n,h.emit(a.a.RESIZE,i,this.renderSize)}},{key:"isPortrait",get:function(){return this.state===a.b.PORTRAIT}},{key:"isLandscape",get:function(){return this.state===a.b.LANDSCAPE}}]),e}(),h=new n.EventEmitter,l=new s,f=new d;t.b={app:void 0,appVue:void 0,scence:void 0,resource:void 0,emitter:h,device:l,resolution:f,config:u}},"66b7":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.LOAD="game-load",e.LOAD_PROGRESS="game-load-progress",e.LOAD_TEXT="game-load-text",e.LOAD_ERROR="game-load-error",e.LOAD_COMPLETE="game-load-complete",e.SOUND_LOAD_PROGRESS="game-sound-load-progress",e.SOUND_LOAD_COMPLETE="game-sound-load-complete",e.GAME_INIT="game-init",e.GAME_ENTER="game-enter",e.STATE_CHANGE="game-state",e.RESIZE="game-resize",e.TICKER="ticker"}(n||(n={}))},c88f:function(e,t,i){},f6a2:function(e,t,i){"use strict";i.r(t),i.d(t,"Loader",(function(){return g}));i("fb6a"),i("d3b7"),i("4ae1"),i("ac1f"),i("25f0"),i("841c");var n=i("d4ec"),o=i("bee2"),r=i("99de"),a=i("7e84"),s=i("262e"),c=i("faa1"),u=i("b383"),d=i.n(u),h=i("fd0b"),l=i("1733"),f=(i("c88f"),function(){function e(){Object(n.a)(this,e),this.preventTouchEvent=!0,this.init(),this.onStateChange(),this.initEvents()}return Object(o.a)(e,[{key:"init",value:function(){var e=l.e.scale,t=this.element=document.createElement("div");t.className="fullscreen",t.innerHTML='\n            <div class="container">\n                <div class="icon-box" style="transform:scale('.concat(e,') translate(-50%,-50%)">\n                </div>\n            </div>'),this.element.style.visibility="hidden",document.body.appendChild(t)}},{key:"onStateChange",value:function(){var e=l.e.isPortrait;if(l.c.mobile.ios&&!l.c.mobile.tablet){var t=document.documentElement.clientHeight,i=e?window.innerHeight==t:window.innerHeight<t;this.element.style.visibility=i?"visible":"hidden",document.querySelector("#app").style.pointerEvents=i?"none":"",this.preventTouchEvent=!i,window.scrollTo(0,0)}}},{key:"onTouchFullScreen",value:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}},{key:"onPreventTouch",value:function(e){(this.preventTouchEvent||e.touches.length>1)&&e.preventDefault()}},{key:"doClick",value:function(e){var t,i=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||((t=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e.view,1,i.screenX,i.screenY,i.clientX,i.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i.dispatchEvent(t))}},{key:"initEvents",value:function(e){var t=e?function(e,t,i,n){e.removeEventListener(t,i,n)}:function(e,t,i,n){e.addEventListener(t,i,n)};t(window,"touchstart",this,{passive:!1}),t(window,"touchend",this),t(window,"touchcancel",this),t(window,"resize",this),t(window,"orientationchange",this)}},{key:"handleEvent",value:function(e){switch(e.type){case"touchstart":this.onPreventTouch(e);break;case"touchend":case"touchcancel":this.doClick(e),l.c.mobile.andriod&&this.onTouchFullScreen();break;case"resize":case"orientationchange":this.onStateChange()}}}]),e}());i("02a2");function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var g=function(e){Object(s.a)(c,e);var t,i=(t=c,function(){var e,i=Object(a.a)(t);if(v()){var n=Object(a.a)(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return Object(r.a)(this,e)});function c(){return Object(n.a)(this,c),i.apply(this,arguments)}return Object(o.a)(c,[{key:"init",value:function(){var e=d.a.parse(location.search.slice(1));document.body.setAttribute("data-browser",function(){for(var e in l.c.browser)if(l.c.browser[e])return e}()),document.body.innerHTML+='\n            <div class="loader-page">\n                <div class="container">\n                    <i class="logo"></i>\n                    <div class="progress">\n                        <span class="bar"></span>\n                    </div>\n                    <i class="message">'.concat("zh_CN"==e.language?"加载中...":"Loading...",'</i>\n                </div>\n                <div class="mask"></div>\n            </div>\n        '),l.c.mobile.device&&new f,this.elContainer=document.querySelector(".loader-page .container"),this.elProgress=document.querySelector(".loader-page .bar"),this.elText=document.querySelector(".loader-page .message"),this.resize()}},{key:"load",value:function(){this.emit("load"),this.init(),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=function(){return e.resize()},i=function(t){return e.progress=t},n=function(t){return e.text=t},o=function(t){return e.text=t};l.d.on(h.a.RESIZE,t).on(h.a.LOAD_PROGRESS,i).on(h.a.LOAD_TEXT,n).on(h.a.LOAD_ERROR,o).once(h.a.GAME_ENTER,(function(){l.d.off(h.a.RESIZE,t).off(h.a.LOAD_PROGRESS,i).off(h.a.LOAD_TEXT,n).off(h.a.LOAD_ERROR,o),e.complete()})),window.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}},{key:"resize",value:function(){this.elContainer.style.transform="translate(-50%,-50%) scale("+l.e.scale+")",this.elContainer.style.width="".concat(100/l.e.scale,"% "),this.elContainer.style.height="".concat(100/l.e.scale,"% ")}},{key:"complete",value:function(){var e=document.querySelector(".loader-page"),t=e.querySelector(".mask");t.style.opacity="1",t.addEventListener("transitionend",(function(){e.style.opacity="0",e.addEventListener("transitionend",(function(){document.querySelector("body").removeChild(e)}))}))}},{key:"progress",set:function(e){this.elProgress.style.width=e+"%"}},{key:"text",set:function(e){this.elText.innerText=e}}]),c}(c.EventEmitter)},fd0b:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o.a}));var n,o=i("66b7");!function(e){e.WEB="web",e.LANDSCAPE="landscape",e.PORTRAIT="portrait"}(n||(n={}))}}]);