(window.webpackJsonp=window.webpackJsonp||[]).push([["loader"],{"02a2":function(e,t,n){},1733:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return u}));var i=n("faa1"),o=(n("c975"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("5319"),n("1276"),n("d4ec")),r=n("bee2"),s=n("fd0b"),a=function(){function e(){Object(o.a)(this,e),this.phone={iphonex:!1,iphonexr:!1,iphonexsmax:!1},this.browser={chrome:!1,safari:!1,firefox:!1,ie:!1,edge:!1,opera:!1,qq:!1,360:!1},this.mobile={device:!1,ios:!1,andriod:!1,tablet:!1},this.mobile=this.initMobileData(),this.version=this.getVersion(),this.webkit=this.iosWKWebView(),this.notchScreen=this.isNotchScreen(),this.browser=this.initBrowserData()}return Object(r.a)(e,[{key:"initMobileData",value:function(){var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,n=!!/iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()),i=/(?:iPad|PlayBook)/.test(e)||t&&!/(?:Mobile)/.test(e)||/(?:Firefox)/.test(e)&&/(?:Tablet)/.test(e);return{ios:n,andriod:t,tablet:i,device:t||n||i}}},{key:"getVersion",value:function(){return(navigator.userAgent.toLocaleLowerCase().match(/os [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}},{key:"iosWKWebView",value:function(){return this.mobile.ios&&-1==navigator.userAgent.indexOf("Safari")}},{key:"isNotchScreen",value:function(){var e=this.mobile.ios,t=screen.width,n=screen.height;return this.phone.iphonex=e&&375==t&&812==n&&3==devicePixelRatio,this.phone.iphonexr=e&&414==t&&896==n&&2==devicePixelRatio,this.phone.iphonexsmax=e&&414==t&&896==n&&3==devicePixelRatio,this.phone.iphonex||this.phone.iphonexr||this.phone.iphonexsmax}},{key:"initBrowserData",value:function(){var e=navigator.userAgent;return{chrome:e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1,safari:e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome")&&void 0===window.external,firefox:e.indexOf("Firefox")>-1,ie:!!window.ActiveXObject||"ActiveXObject"in window,edge:e.indexOf("Edge")>-1,opera:e.indexOf("Opera")>-1,qq:e.indexOf("qqbrowse")>-1,360:function(e,t){var n=navigator.mimeTypes;for(var i in n)if("application/vnd.chromium.remoting-viewer"==n[i].type)return!0;return!1}()}}},{key:"getWinOSName",value:function(){if(-1!=navigator.appVersion.indexOf("Win")&&/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(navigator.userAgent)&&"NT"==RegExp.$1)switch(RegExp.$2){case"5.1":return"WindowsXP";case"6.0":return"WindowsVista";case"6.1":return"Windows7";case"6.2":return"Windows8";case"10.0":return"Windows10";default:return"NT"}return""}},{key:"osName",get:function(){var e="Unknow",t="",n=[],i=navigator.userAgent,o=navigator.appVersion,r=navigator.platform;return this.mobile.andriod&&(t=(n=/android (\d+(?:\.\d+)+)/i.exec(i)||/android (\d+(?:\.\d+)+)/i.exec(r))?n[1]:""),this.mobile.ios&&(t=(n=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(i))?n[2]:""),this.getWinOSName()?e=this.getWinOSName():this.mobile.ios?e="iOS_"+t:-1!==o.indexOf("Mac")?e="OS X_":-1!==o.indexOf("X11")&&-1===o.indexOf("Linux")?e="OS X":this.mobile.andriod?e="Android_"+t:-1!==o.indexOf("Linux")&&(e="Linux"),e}},{key:"screenState",get:function(){var e=s.b.WEB;(e=this.mobile.device?90==window.orientation||-90==window.orientation?s.b.LANDSCAPE:s.b.PORTRAIT:window.innerWidth>1100?s.b.WEB:window.innerWidth/window.innerHeight<.73?s.b.PORTRAIT:s.b.LANDSCAPE,this.mobile.ios&&parseInt(this.version.split(".")[0])<9)&&(e=document.documentElement.clientWidth>document.documentElement.clientHeight?s.b.LANDSCAPE:s.b.PORTRAIT);return this.mobile.tablet&&(e=s.b.LANDSCAPE),e}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.a)(this,e),this.width=t,this.height=n}return Object(r.a)(e,[{key:"center",get:function(){return{x:this.width/2,y:this.height/2}}},{key:"ratio",get:function(){return this.width/this.height}}]),e}(),u={size:{width:800,height:600}},d=function(){function e(){var t=this;Object(o.a)(this,e),this.scale=1;var n=u.size;this.size=new c(n.width,n.height),window.addEventListener("resize",(function(){return t.onResize()})),window.addEventListener("orientationchange",(function(){return t.onResize()})),h.once(s.a.GAME_ENTER,(function(){t.onResize(),h.emit(s.a.STATE_CHANGE,t.state)})),this.onResize()}return Object(r.a)(e,[{key:"onResize",value:function(){this.doState(),this.doResize()}},{key:"doState",value:function(){var e=l.screenState;if(e!==this.state){var t=this.state;this.state=e,this.size=this.isPortrait?new c(u.size.height,u.size.width):new c(u.size.width,u.size.height),document.querySelector("body").setAttribute("data-screen",this.state),h.emit(s.a.STATE_CHANGE,this.state,t)}}},{key:"doResize",value:function(){var e=new c(innerWidth,innerHeight),t=this.size,n=e.ratio>t.ratio?e.height/t.height:e.width/t.width,i=new c(t.width*n,t.height*n);this.scale=n,this.renderSize=i,h.emit(s.a.RESIZE,n,this.renderSize)}},{key:"isPortrait",get:function(){return this.state===s.b.PORTRAIT}},{key:"isLandscape",get:function(){return this.state===s.b.LANDSCAPE}}]),e}(),h=new i.EventEmitter,l=new a,f=new d;t.b={app:void 0,appVue:void 0,scence:void 0,resource:void 0,emitter:h,device:l,resolution:f,config:u}},"66b7":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.LOAD="game-load",e.LOAD_PROGRESS="game-load-progress",e.LOAD_TEXT="game-load-text",e.LOAD_ERROR="game-load-error",e.LOAD_COMPLETE="game-load-complete",e.SOUND_LOAD_PROGRESS="game-sound-load-progress",e.SOUND_LOAD_COMPLETE="game-sound-load-complete",e.GAME_INIT="game-init",e.GAME_ENTER="game-enter",e.STATE_CHANGE="game-state",e.RESIZE="game-resize",e.TICKER="ticker"}(i||(i={}))},c88f:function(e,t,n){},f6a2:function(e,t,n){"use strict";n.r(t),n.d(t,"Loader",(function(){return g}));n("fb6a"),n("d3b7"),n("4ae1"),n("ac1f"),n("25f0"),n("841c");var i=n("d4ec"),o=n("bee2"),r=n("262e"),s=n("99de"),a=n("7e84"),c=(n("4160"),n("c975"),n("d81d"),n("a434"),n("159b"),function(){function e(){Object(i.a)(this,e),this.events={}}return Object(o.a)(e,[{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(!this.events[e])return this;var r=this.events[e];return r.map((function(e){return e})).forEach((function(e){return e.apply(t,i)})),this}},{key:"off",value:function(e,t){if(!this.events[e])return this;if(!t)return this.events[e]=null,this;var n=this.events[e].indexOf(t);return this.events[e].splice(n,1),this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function i(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];t.apply(n,r),n.off(e,i)})),this}}]),e}()),u=n("b383"),d=n.n(u),h=n("fd0b"),l=n("1733"),f=(n("c88f"),function(){function e(){Object(i.a)(this,e),this.preventTouchEvent=!0,this.init(),this.onStateChange(),this.initEvents()}return Object(o.a)(e,[{key:"init",value:function(){var e=l.e.scale,t=this.element=document.createElement("div");t.className="fullscreen",t.innerHTML='\n            <div class="container">\n                <div class="icon-box" style="transform:scale('.concat(e,') translate(-50%,-50%)">\n                </div>\n            </div>'),this.element.style.visibility="hidden",document.body.appendChild(t)}},{key:"onStateChange",value:function(){var e=l.e.isPortrait;if(l.c.mobile.ios&&!l.c.mobile.tablet){var t=document.documentElement.clientHeight,n=e?window.innerHeight==t:window.innerHeight<t;this.element.style.visibility=n?"visible":"hidden",document.querySelector("#app").style.pointerEvents=n?"none":"",this.preventTouchEvent=!n,window.scrollTo(0,0)}}},{key:"onTouchFullScreen",value:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}},{key:"onPreventTouch",value:function(e){(this.preventTouchEvent||e.touches.length>1)&&e.preventDefault()}},{key:"doClick",value:function(e){var t,n=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||((t=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e.view,1,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(t))}},{key:"initEvents",value:function(e){var t=e?function(e,t,n,i){e.removeEventListener(t,n,i)}:function(e,t,n,i){e.addEventListener(t,n,i)};t(window,"touchstart",this,{passive:!1}),t(window,"touchend",this),t(window,"touchcancel",this),t(window,"resize",this),t(window,"orientationchange",this)}},{key:"handleEvent",value:function(e){switch(e.type){case"touchstart":this.onPreventTouch(e);break;case"touchend":case"touchcancel":this.doClick(e),l.c.mobile.andriod&&this.onTouchFullScreen();break;case"resize":case"orientationchange":this.onStateChange()}}}]),e}());n("02a2");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(a.a)(e);if(t){var o=Object(a.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(s.a)(this,n)}}var g=function(e){Object(r.a)(n,e);var t=v(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"init",value:function(){var e=d.a.parse(location.search.slice(1));document.body.setAttribute("data-browser",function(){for(var e in l.c.browser)if(l.c.browser[e])return e}()),document.body.innerHTML+='\n            <div class="loader-page">\n                <div class="container">\n                    <i class="logo"></i>\n                    <div class="progress">\n                        <span class="bar"></span>\n                    </div>\n                    <i class="message">'.concat("zh_CN"==e.language?"加载中...":"Loading...",'</i>\n                </div>\n                <div class="mask"></div>\n            </div>\n        '),l.c.mobile.device&&new f,this.elContainer=document.querySelector(".loader-page .container"),this.elProgress=document.querySelector(".loader-page .bar"),this.elText=document.querySelector(".loader-page .message"),this.resize()}},{key:"load",value:function(){this.emit("load"),this.init(),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=function(){return e.resize()},n=function(t){return e.progress=t},i=function(t){return e.text=t},o=function(t){return e.text=t};l.d.on(h.a.RESIZE,t).on(h.a.LOAD_PROGRESS,n).on(h.a.LOAD_TEXT,i).on(h.a.LOAD_ERROR,o).once(h.a.GAME_ENTER,(function(){l.d.off(h.a.RESIZE,t).off(h.a.LOAD_PROGRESS,n).off(h.a.LOAD_TEXT,i).off(h.a.LOAD_ERROR,o),e.complete()})),window.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}},{key:"resize",value:function(){this.elContainer.style.transform="translate(-50%,-50%) scale("+l.e.scale+")",this.elContainer.style.width="".concat(100/l.e.scale,"% "),this.elContainer.style.height="".concat(100/l.e.scale,"% ")}},{key:"complete",value:function(){var e=document.querySelector(".loader-page"),t=e.querySelector(".mask");t.style.opacity="1",t.addEventListener("transitionend",(function(){e.style.opacity="0",e.addEventListener("transitionend",(function(){document.querySelector("body").removeChild(e)}))}))}},{key:"progress",set:function(e){this.elProgress.style.width=e+"%"}},{key:"text",set:function(e){this.elText.innerText=e}}]),n}(c)},fd0b:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o.a}));var i,o=n("66b7");!function(e){e.WEB="web",e.LANDSCAPE="landscape",e.PORTRAIT="portrait"}(i||(i={}))}}]);